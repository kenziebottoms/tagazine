{% extends 'zines/base.html' %}

{% block title %}
    {{ profile }}
{% endblock %}

{% block editor %}

    {% load app_filters %}

    {% if messages %}
        {% for message in messages %}
            <i class="{{ message.tags|lastWord }} material-icons md-48">{{ message.tags|lastWord }}</i>
            <div class="label">{{ message }}</div>
            <br/>
        {% endfor %}
    {% endif %}
    {% if user.is_authenticated and user.id == profile.user.id %}
        <a href="{% url 'edit_profile' profile.id %}">
            <i class="material-icons md-48">edit</i>
            <div class="label">Edit</div>
        </a>
    {% endif %}
{% endblock %}

{% block body %}
    {% load static %}
    <h1>{{ profile }}</h1>
    <div class="info">
        {% if profile.website != '' %}
            <a href="{{ profile.website }}" target="blank">
                <i class="material-icons md-30">launch</i>
            </a>
        {% endif %}
        {% if profile.contact_email != '' %}
            <a href="mailto:{{ profile.contact_email }}" target="blank">
                <i class="material-icons md-30">mail_outline</i>
            </a>
        {% endif %}
    </div>
    <date>member since {{ profile.member_since|date:'b j, Y' }}</date>
    <p>{{ profile.bio|safe }}</p>
    <hr/>
    {% if works %}
        <div class="zines">
            <h3>co-authored zines</h3>
            {% for work in works %}
                <div class="issue">
                    <div class="bg" style="background-image: url(/media/{{ work.zine.cover }})">
                        &nbsp;
                    </div>
                    <a href="{% url 'zine' work.zine.id %}">
                        <div class="title">
                            <span>{{ work.zine.title }}</span>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    {% endif %}
    {% if guest_works %}
        <div class="block">
            <h3>featured on</h3>
            {% for issue in guest_works %}
                <div class="issue">
                    <div class="bg" style="background-image: url(/media/{% if issue.cover != '' %}{{ issue.cover }}{% else %}{{ issue.zine.cover }}{% endif %})">
                        &nbsp;
                    </div>
                    <a href="{% url 'issue' issue.zine.id issue.number %}">
                        <div class="title">
                            <span>{{ issue.displayTitle }}</span>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    {% endif %}

{% endblock %}